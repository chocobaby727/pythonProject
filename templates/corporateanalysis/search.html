<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Kameron:wght@400;700&family=Noto+Sans+JP:wght@500&display=swap"
      rel="stylesheet"
    />

    <title>会社検索画面</title>

    <link rel="stylesheet" href="/static/styles/vendors/bootstrap-reboot.css" />

    <link
      crossorigin="anonymous"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
      rel="stylesheet"
    />
    <script
      crossorigin="anonymous"
      integrity="sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2"
      src="https://code.jquery.com/jquery-3.5.1.min.js"
    ></script>
    <script
      crossorigin="anonymous"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    ></script>
    <script
      crossorigin="anonymous"
      integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
    ></script>
    <link rel="stylesheet" href="/static/styles/vendors/materialize.css" />
    <link rel="stylesheet" href="/static/styles/style.css" />
  </head>
  <body>
    <div id="global-container">
      <div class="card horizontal">
        <h2 class="card-header">会社検索</h2>
        <div class="card-stacked">
          <div class="card-content">
            <ul id="slide-out" class="sidenav">
              <li>
                <div class="user-view">
                  <div class="background">
                    <img src="" />
                  </div>
                  <a href="#user"><img class="circle" src="" /></a>
                  <a href="#name"
                    ><span class="white-text name">John Doe</span></a
                  >
                  <a href="#email"
                    ><span class="white-text email"
                      >jdandturk@gmail.com</span
                    ></a
                  >
                </div>
              </li>
              <li>
                <a href="#!"
                  ><i class="material-icons">cloud</i>First Link With Icon</a
                >
              </li>
              <li>
                <a href="#!">Second Link</a>
              </li>
              <li>
                <div class="divider"></div>
              </li>
              <li>
                <a class="subheader">Subheader</a>
              </li>
              <li>
                <a class="waves-effect" href="#!">Third Link With Waves</a>
              </li>
            </ul>
            <a href="#" data-target="slide-out" class="sidenav-trigger">
              <i class="material-icons">menu</i>
            </a>
            <div class="row" id="search-area">
              <form id="search-form" method="get" action="">
                <div class="row">
                  <div class="input-field col s6">
                    <i class="material-icons prefix">search</i>
                    <input
                      type="text"
                      id="search-field"
                      placeholder="検索"
                      id="icon_prefix2"
                      class="materialize-textarea"
                    />
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
        
      </div>
    </div>

    <hr />

    <button id="count">カウント</button>
    <button id="clear">クリア</button>

    <script src="https://unpkg.com/axios@0.19.0/dist/axios.min.js"></script>
    <script src="/static/scripts/js/vendors/materialize.min.js"></script>

    <script>
      axios.defaults.xsrfCookieName = "csrftoken";
      axios.defaults.xsrfHeaderName = "X-CSRFToken";
    </script>

    <script>
      $(document).ready(function () {
        $(".sidenav").sidenav();
      });

      $("#search-field").click(function () {
        keywords = sessionStorage.getItem("count");
        if (keywords) {
          console.log(...keywords);
          for (var i = 0; i < keywords.length; i++) {
            $('.card-stacked').append(`<div class='card-action' id='search-history'><div><a href='#'>${keywords[i]}</a></div></div>`)
          } 
        }
      });

      const add_keyword = function (keyword) {
        keywords = sessionStorage.getItem("keywords");
        keywords.push(keyword);
        sessionStorage.setItem("keywords", keywords);
      };

      document.getElementById("count").onclick = function () {
        count = Number(sessionStorage.getItem("count")) + 1;
        sessionStorage.setItem("count", eval(count));
        $("#search-history").append(`<hr><div class="search-keyword"><a href="#">${count}</a></div>`);
      };

      document.getElementById("clear").onclick = function () {
        sessionStorage.removeItem("count");
      };
    </script>
  </body>
</html>
